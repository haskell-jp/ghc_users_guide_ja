
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>7.1. GHCを使う &mdash; Glasgow Haskell Compiler &lt;release&gt; Users Guide</title>
    
    <link rel="stylesheet" href="_static/ghc-theme.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '8.0.2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="Glasgow Haskell Compiler &lt;release&gt; Users Guide" href="index.html" />
    <link rel="up" title="7. GHCを使う" href="usage.html" />
    <link rel="next" title="7.2. 警告と整合性検査" href="using-warnings.html" />
    <link rel="prev" title="7. GHCを使う" href="usage.html" /> 
  </head>
  <body role="document">
<div class="logo">
    <h1><a href="index.html">Glasgow Haskell Compiler Users Guide</a></h1>
</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="using-warnings.html" title="7.2. 警告と整合性検査"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="usage.html" title="7. GHCを使う"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">GHC 8.0.2 Users Guide</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="usage.html" accesskey="U">7. GHCを使う</a> &raquo;</li> 
      </ul>
    </div>

      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">7.1. GHCを使う</a><ul>
<li><a class="reference internal" href="#id1">7.1.1. 始めよう: プログラムをコンパイルする</a></li>
<li><a class="reference internal" href="#id2">7.1.2. オプションの概要</a><ul>
<li><a class="reference internal" href="#id3">7.1.2.1. コマンドライン引数</a></li>
<li><a class="reference internal" href="#source-file-options">7.1.2.2. ソースファイル中のコマンドラインオプション</a></li>
<li><a class="reference internal" href="#ghci">7.1.2.3. GHCiからオプションを設定する</a></li>
</ul>
</li>
<li><a class="reference internal" href="#static-dynamic-flags">7.1.3. 静的オプション，動的オプション，モード指定オプション</a></li>
<li><a class="reference internal" href="#file-suffixes">7.1.4. 重要な意味のあるファイル接尾辞</a></li>
<li><a class="reference internal" href="#modes">7.1.5. 実行モード</a><ul>
<li><a class="reference internal" href="#ghc-make">7.1.5.1. <code class="docutils literal"><span class="pre">ghc</span></code> <code class="docutils literal"><span class="pre">--make</span></code> を使う</a></li>
<li><a class="reference internal" href="#eval-mode">7.1.5.2. 式評価モード</a></li>
<li><a class="reference internal" href="#options-order">7.1.5.3. 一括コンパイラモード</a><ul>
<li><a class="reference internal" href="#overriding-suffixes">7.1.5.3.1. ファイルに対するデフォルトの振る舞いを上書きする</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#options-help">7.1.6. 饒舌性に関するオプション</a></li>
<li><a class="reference internal" href="#options-platform">7.1.7. プラットフォーム固有のオプション</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="usage.html"
                        title="previous chapter">7. GHCを使う</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="using-warnings.html"
                        title="next chapter">7.2. 警告と整合性検査</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/using.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="ghc">
<span id="using-ghc"></span><h1>7.1. GHCを使う<a class="headerlink" href="#ghc" title="Permalink to this headline">¶</a></h1>
<span class="target" id="index-0"></span><div class="section" id="id1">
<h2>7.1.1. 始めよう: プログラムをコンパイルする<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<p>この章では，400を超えるフラグを含むGHCのコマンドライン構文の完全なリファレンスを示します．
GHCは大きく複雑なシステムで，大量の詳細がありますのですので，どう始めてよいのかが判りにくでしょう．
これを踏まえて，この節ではHaskellプログラムをコンパイルするためのGHCの基本的な使い方をざっと紹介します．
これを読んでから，以降の節での完全な構文の解説に飛び込むのがいいでしょう．</p>
<p>Hello World プログラムを作って，これをコンパイルして，走らせてみましょう．
まず，以下のHaskellコードを含む <code class="file docutils literal"><span class="pre">hello.hs</span></code> を作成しましょう．</p>
<blockquote>
<div>main = putStrLn &#8220;Hello, World!&#8221;</div></blockquote>
<p>このプログラムをコンパイルするには以下のようにGHCを使います．</p>
<div class="highlight-sh"><div class="highlight"><pre>$ ghc hello.hs
</pre></div>
</div>
<p>(ここで <code class="docutils literal"><span class="pre">$</span></code> はシェルのプロンプトですので，タイプする必要はありません．)
GHCはソースファイル <code class="file docutils literal"><span class="pre">hello.hs</span></code> をコンパイルして，オブジェクトファイル <code class="file docutils literal"><span class="pre">hello.o</span></code> と
インターフェイス <code class="file docutils literal"><span class="pre">hello.hi</span></code> を生成してから，オブジェクトをGHC付属のライブラリとリンクして，
Unix/Linux/Mac では <code class="file docutils literal"><span class="pre">hello</span></code> という実行可能ファイルを Windowsでは <code class="file docutils literal"><span class="pre">hello.exe</span></code> という実行ファイルを生成します．</p>
<p>デフォルトではGHCは自身の動作について寡黙で，表示するのはエラーメッセージだけです．
裏で何が行われているか詳細をみたいときには，コマンドラインに <a class="reference internal" href="#ghc-flag--v"><code class="xref std std-ghc-flag docutils literal"><span class="pre">-v</span></code></a> を追加すれば良いでしょう．</p>
<p>コンパイルができたら，以下のようにすればプログラムを実行できます．</p>
<div class="highlight-sh"><div class="highlight"><pre>$ ./hello
Hello World!
</pre></div>
</div>
<p>プログラムが複数のモジュールから構成されている場合でも，単に <code class="docutils literal"><span class="pre">Main</span></code> モジュールのファイル名を指定するだけですみます．
GHCは <code class="docutils literal"><span class="pre">Main</span></code> モジュールの <code class="docutils literal"><span class="pre">import</span></code> 宣言を見て，プログラムを構成するその他のモジュールを見つけ，そのソースファイルを探します．
したがって <code class="docutils literal"><span class="pre">Main</span></code> モジュールを除くモジュールのソースファイルはモジュール名を反映していなければなりません
(ドットはディレクトリ区切り子に変換します)．
たとえば <code class="docutils literal"><span class="pre">Data.Person</span></code> モジュールは，Unix/Linux/Macでは <code class="docutils literal"><span class="pre">Data/Person.hs</span></code> というファイルに，
Windowsでは <code class="docutils literal"><span class="pre">Data\Person.hs</span></code> というファイルに置くことになります．</p>
</div>
<div class="section" id="id2">
<h2>7.1.2. オプションの概要<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<p>GHCの振る舞いはオプションによって制御します．
歴史的理由からオプションのことをコマンドラインフラグとかコマンドライン引数ともいいます．
オプションの指定方法は3つあります．</p>
<div class="section" id="id3">
<h3>7.1.2.1. コマンドライン引数<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<p id="index-1">GHCを起動する構文は以下の形式になります．</p>
<div class="highlight-none"><div class="highlight"><pre>ghc [argument...]
</pre></div>
</div>
<p>コマンドライン引数はオプションもしくはファイル名です．</p>
<p>コマンドラインオプションは <code class="docutils literal"><span class="pre">-</span></code> で始まります．
これをひとまとめにすることは**できません**．
<code class="docutils literal"><span class="pre">-vO</span></code> と <code class="docutils literal"><span class="pre">-v</span> <span class="pre">-O</span></code> とは違うものであるということです．
オプションをファイル名より前で指定する必要はありません．
たとえば <code class="docutils literal"><span class="pre">ghc</span> <span class="pre">*.o</span> <span class="pre">-o</span> <span class="pre">foo</span></code> のようにできます．
すべてのオプションを処理してから，それらをすべてのファイルに適用します．
そのため <code class="docutils literal"><span class="pre">ghc</span> <span class="pre">-c</span> <span class="pre">-O1</span> <span class="pre">Foo.hs</span> <span class="pre">-O2</span> <span class="pre">Bar.hs</span></code> とやって <code class="docutils literal"><span class="pre">Foo.hs</span></code> と <code class="docutils literal"><span class="pre">Bar.hs</span></code> に異なる最適化水準を適用することはできません．</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p id="index-2">コマンドラインオプションは <em>順序依存</em> であることに注意してください．引数は左から右へ評価されます．
このことによって，フラグの連動がある場合おかしな効果があらわれことがあります．
たとえば <code class="xref std std-ghc-flag docutils literal"><span class="pre">-fno-specialise</span></code> と <a class="reference internal" href="using-optimisation.html#ghc-flag--O1"><code class="xref std std-ghc-flag docutils literal"><span class="pre">-O1</span></code></a> (このフラグにより <a class="reference internal" href="using-optimisation.html#ghc-flag--fspecialise"><code class="xref std std-ghc-flag docutils literal"><span class="pre">-fspecialise</span></code></a> が有効になる) とを考えてみましょう．
つぎの2つのコマンドラインは全く別ものです．</p>
<p><code class="docutils literal"><span class="pre">-fno-specialise</span> <span class="pre">-O1</span></code></p>
<blockquote>
<div><code class="docutils literal"><span class="pre">-fno-specialise</span></code> に  <code class="docutils literal"><span class="pre">-O1</span></code> が上書きして <code class="docutils literal"><span class="pre">-fspecialise</span></code> が有効になります．</div></blockquote>
<p><code class="docutils literal"><span class="pre">-O1</span> <span class="pre">-fno-specialise</span></code></p>
<blockquote class="last">
<div><code class="docutils literal"><span class="pre">-O1</span></code> に連動する <code class="docutils literal"><span class="pre">-fspecialise</span></code> は <code class="docutils literal"><span class="pre">-fno-specialise</span></code> で上書きされてしまうので有効になりません．</div></blockquote>
</div>
</div>
<div class="section" id="source-file-options">
<span id="id4"></span><h3>7.1.2.2. ソースファイル中のコマンドラインオプション<a class="headerlink" href="#source-file-options" title="Permalink to this headline">¶</a></h3>
<p id="index-3">ソースファイルとコマンドラインを強く結びつけた方が便利なことがあります．
たとえば，意図して名前のシャドーイングをおこなっているHaskellソースがあれば，
そのファイルについては <code class="docutils literal"><span class="pre">-Wno-name-shadowing</span></code> オプション付きでコンパイルすべきです．
<code class="docutils literal"><span class="pre">Makefile</span></code> をつかって，ファイルごとのオプション一覧を管理する代りに，
<code class="docutils literal"><span class="pre">OPTIONS_GHC</span></code> <a class="reference internal" href="glasgow_exts.html#options-pragma"><span>pragma</span></a> を使ってソースファイルに直接書いておけます．</p>
<div class="highlight-haskell"><div class="highlight"><pre><span class="cm">{-# OPTIONS_GHC -Wno-name-shadowing #-}</span>
<span class="kr">module</span> <span class="nn">X</span> <span class="kr">where</span>
<span class="o">...</span>
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">OPTIONS_GHC</span></code> は <em>ファイルヘッダプラグマ</em> (<a class="reference internal" href="glasgow_exts.html#options-pragma"><span>OPTIONS_GHC pragma</span></a> 参照)です．</p>
<p><code class="docutils literal"><span class="pre">OPTIONS_GHC</span></code> プラグマ中で使えるのは <em>動的</em> フラグだけです(<a class="reference internal" href="#static-dynamic-flags"><span>静的オプション，動的オプション，モード指定オプション</span></a> 参照)．</p>
<p>コマンドシェルからこのソースオプションを取得するわけではなく，
コンパイラが内部的に保持しているコマンドライン引数配列に含めるだけであることに注意してください．
そのため <code class="docutils literal"><span class="pre">OPTIONS_GHC</span></code> の中でワイルドカードを使おうとすると残念なことになります．</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><code class="docutils literal"><span class="pre">OPTIONS_GHC</span></code> の内容はコマンドラインオプションの後に連結するので，
コマンドラインで与えられたオプションがソースファイルオプションで上書きされます．</p>
</div>
<p>Makefile の内容をすべてソースファイルに移すのは推奨しませんが，
場合によっては <code class="docutils literal"><span class="pre">OPTIONS_GHC</span></code> プラグマを使うのが正しいやり方になります．
(<a class="reference internal" href="separate_compilation.html#ghc-flag--keep-hc-file"><code class="xref std std-ghc-flag docutils literal"><span class="pre">-keep-hc-file</span></code></a> を使っていて，モジュールに <code class="docutils literal"><span class="pre">OPTION</span></code> フラグがあるなら，
生成した <code class="docutils literal"><span class="pre">.hc</span></code> ファイルには <code class="docutils literal"><span class="pre">OPTIONS_GHC</span></code> が置かれます．)</p>
</div>
<div class="section" id="ghci">
<h3>7.1.2.3. GHCiからオプションを設定する<a class="headerlink" href="#ghci" title="Permalink to this headline">¶</a></h3>
<p>GHCi内から <a class="reference internal" href="ghci.html#ghci-cmd-:set"><code class="xref std std-ghci-cmd docutils literal"><span class="pre">:set</span></code></a> コマンドを使ってオプションを変更することもできます．</p>
</div>
</div>
<div class="section" id="static-dynamic-flags">
<span id="id5"></span><h2>7.1.3. 静的オプション，動的オプション，モード指定オプション<a class="headerlink" href="#static-dynamic-flags" title="Permalink to this headline">¶</a></h2>
<p id="index-4">GHCのコマンドラインオプションは，静的オプション，動的オプション，モード指定オプションのいずれかに分類されます．</p>
<blockquote>
<div><p><a class="reference internal" href="#ghc-flag---make"><code class="xref std std-ghc-flag docutils literal"><span class="pre">--make</span></code></a> や <a class="reference internal" href="#ghc-flag--E"><code class="xref std std-ghc-flag docutils literal"><span class="pre">-E</span></code></a> はモード指定フラグです．モード指定フラグはコマンドラインで1つだけ指定できます．
利用可能なモードの一覧は <a class="reference internal" href="#modes"><span>実行モード</span></a> にあります．</p>
<p>モード指定フラグではない大部分のフラグは動的フラグに分類されます．
動的フラグは，コマンドライン，ソースファイルの <code class="docutils literal"><span class="pre">OPTIONS_GHC</span></code> プラグマ，
GHCi内の <a class="reference internal" href="ghci.html#ghci-cmd-:set"><code class="xref std std-ghci-cmd docutils literal"><span class="pre">:set</span></code></a> コマンドのいずれの方法でも設定できます．</p>
<p>残りのすこしばかりのフラグが静的フラグに分類されます．これらのフラグはコマンドラインでのみ使用可能で，1回のGHC/GHCiの実行を通し有効です．</p>
</div></blockquote>
<p>フラグの参照表は(<a class="reference internal" href="flags.html#flag-reference"><span>Flag reference</span></a>)にはそれぞれどのフラグがどれに分類されているかが判るようになっています．</p>
<p>静的でありながら，GHCiの <a class="reference internal" href="ghci.html#ghci-cmd-:set"><code class="xref std std-ghci-cmd docutils literal"><span class="pre">:set</span></code></a> コマンドで設定できるフラグも少しながらあります．
これは参照表では「static/<code class="docutils literal"><span class="pre">:set</span></code>」と表記されています．</p>
</div>
<div class="section" id="file-suffixes">
<span id="id6"></span><h2>7.1.4. 重要な意味のあるファイル接尾辞<a class="headerlink" href="#file-suffixes" title="Permalink to this headline">¶</a></h2>
<p id="index-5">「意味のある」接尾辞 (たとえば <code class="docutils literal"><span class="pre">.lhs</span></code> あるいは <code class="docutils literal"><span class="pre">.o</span></code>)の付いたファイルは，それにしたがって「適切な」方法で処理されます．</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">.hs</span></code></dt>
<dd>Haskellモジュール．</dd>
<dt><code class="docutils literal"><span class="pre">.lhs</span></code></dt>
<dd><p class="first last" id="index-6">「文芸的Haskell」モジュール．</p>
</dd>
<dt><code class="docutils literal"><span class="pre">.hspp</span></code></dt>
<dd>プリプロセッサが生成したファイル．</dd>
<dt><code class="docutils literal"><span class="pre">.hi</span></code></dt>
<dd>Haskellインターフェイスファイル，コンパイラが生成したものであることが多い．</dd>
<dt><code class="docutils literal"><span class="pre">.hc</span></code></dt>
<dd>Haskellコンパイラが生成した中間のCファイル．</dd>
<dt><code class="docutils literal"><span class="pre">.c</span></code></dt>
<dd>Haskellコンパイラが生成したCファイル以外のCファイル．</dd>
<dt><code class="docutils literal"><span class="pre">.ll</span></code></dt>
<dd>中間言語llvmのソースファイル．通常コンパイラが生成する．</dd>
<dt><code class="docutils literal"><span class="pre">.bc</span></code></dt>
<dd>中間言語llvmのビットコードファイル．通常コンパイラが生成する．</dd>
<dt><code class="docutils literal"><span class="pre">.s</span></code></dt>
<dd>アセンブリ言語のソースファイル．通常コンパイラが生成する．</dd>
<dt><code class="docutils literal"><span class="pre">.o</span></code></dt>
<dd>アセンブラが生成するオブジェクトファイル．</dd>
</dl>
<p>これ以外の接尾辞が付く(あるいは接尾辞の付かない)ファイルは直接リンカに渡されます．</p>
</div>
<div class="section" id="modes">
<span id="id7"></span><h2>7.1.5. 実行モード<a class="headerlink" href="#modes" title="Permalink to this headline">¶</a></h2>
<p id="index-7">GHCの振る舞いはまずモード指定フラグで制御します．
モード指定フラグは1つしか与えられませんが，コマンドラインにおいて最初のオプションである必要はありません．
以下は指定例です．</p>
<div class="highlight-none"><div class="highlight"><pre>$ ghc Main.hs --make -o my-application
</pre></div>
</div>
<p>モード指定フラグがない場合，コマンドラインでHaskellのソースファイルが指定されていれば <a class="reference internal" href="#ghc-flag---make"><code class="xref std std-ghc-flag docutils literal"><span class="pre">--make</span></code></a>
モード(<a class="reference internal" href="#make-mode"><span>ghc &#8211;make を使う</span></a>)になり，そうでなければ，コマンドライン中で指定さたオブジェクトをリンクして実行可能ファイルを生成します．</p>
<p>以下のモード指定フラグが利用可能です．</p>
<dl class="ghc-flag">
<dt id="ghc-flag---interactive">
<code class="descname">--interactive</code><code class="descclassname"> </code><a class="headerlink" href="#ghc-flag---interactive" title="Permalink to this definition">¶</a></dt>
<dd><p id="index-8">対話モード． <strong class="program">ghci</strong> としても使えます．
対話モードの詳しい説明は <a class="reference internal" href="ghci.html#ghci"><span>GHCiを使う</span></a> を参照してください．</p>
</dd></dl>

<dl class="ghc-flag">
<dt id="ghc-flag---make">
<code class="descname">--make</code><code class="descclassname"> </code><a class="headerlink" href="#ghc-flag---make" title="Permalink to this definition">¶</a></dt>
<dd><p id="index-9">このモードではGHCは複数のモジュールからなるHaskellプログラムを依存性を解析しながら自動的にビルドします．
単純なHaskellプログラムなら，これは <strong class="command">make</strong> を使うよりずっと簡単でしかも速くビルドできます．
makeモードについては <a class="reference internal" href="#make-mode"><span>ghc &#8211;make を使う</span></a> で解説しています．</p>
<p>コマンドラインでHaskellのソースコードを指定した場合は，このモードがデフォルトになります．
その場合 <a class="reference internal" href="#ghc-flag---make"><code class="xref std std-ghc-flag docutils literal"><span class="pre">--make</span></code></a> オプションは省略できます．</p>
</dd></dl>

<dl class="ghc-flag">
<dt id="ghc-flag--e">
<code class="descname">-e</code><code class="descclassname"> ⟨expr⟩</code><a class="headerlink" href="#ghc-flag--e" title="Permalink to this definition">¶</a></dt>
<dd><p id="index-10">式評価モード．対話モードとほぼ同じですが，
評価する式(⟨expr⟩)は1つだけで，コマンドラインで与えます．
詳細については <a class="reference internal" href="#eval-mode"><span>式評価モード</span></a> を参照してください．</p>
</dd></dl>

<dl class="ghc-flag">
<dt id="ghc-flag--E">
<code class="descname">-E</code><code class="descclassname"> </code><a class="headerlink" href="#ghc-flag--E" title="Permalink to this definition">¶</a></dt>
<dt id="ghc-flag--C">
<code class="descname">-C</code><code class="descclassname"> </code><a class="headerlink" href="#ghc-flag--C" title="Permalink to this definition">¶</a></dt>
<dt id="ghc-flag--S">
<code class="descname">-S</code><code class="descclassname"> </code><a class="headerlink" href="#ghc-flag--S" title="Permalink to this definition">¶</a></dt>
<dt id="ghc-flag--c">
<code class="descname">-c</code><code class="descclassname"> </code><a class="headerlink" href="#ghc-flag--c" title="Permalink to this definition">¶</a></dt>
<dd><p>これは伝統的なバッチ処理コンパイラモードです．GHCは1度に1つのソースファイルをコンパイルするか，
オブジェクトファイルをリンクして1つの実行可能ファイルを生成します．
<a class="reference internal" href="#options-order"><span>一括コンパイラモード</span></a> を参照してください．</p>
</dd></dl>

<dl class="ghc-flag">
<dt id="ghc-flag--M">
<code class="descname">-M</code><code class="descclassname"> </code><a class="headerlink" href="#ghc-flag--M" title="Permalink to this definition">¶</a></dt>
<dd><p id="index-11">依存性生成モード．このモードでは，GHCを使って <code class="docutils literal"><span class="pre">Makefile</span></code> ファイルで使うのに適した依存性情報を生成できます．
<a class="reference internal" href="separate_compilation.html#makefile-dependencies"><span>Dependency generation</span></a> を参照してください．</p>
</dd></dl>

<dl class="ghc-flag">
<dt id="ghc-flag---frontend">
<code class="descname">--frontend</code><code class="descclassname"> ⟨module⟩</code><a class="headerlink" href="#ghc-flag---frontend" title="Permalink to this definition">¶</a></dt>
<dd><p id="index-12">指定したフロントエンドプラグインを使ってGHCを走らせます．詳細は <a class="reference internal" href="extending_ghc.html#frontend-plugins"><span>Frontend plugins</span></a> を参照してください．</p>
</dd></dl>

<dl class="ghc-flag">
<dt id="ghc-flag---mk-dll">
<code class="descname">--mk-dll</code><code class="descclassname"> </code><a class="headerlink" href="#ghc-flag---mk-dll" title="Permalink to this definition">¶</a></dt>
<dd><p id="index-13">DLL作成モード(Windows のみ)． <a class="reference internal" href="win32-dlls.html#win32-dlls-create"><span>Creating a DLL</span></a> を参照してください．</p>
</dd></dl>

<dl class="ghc-flag">
<dt id="ghc-flag---help">
<code class="descname">--help</code><code class="descclassname"> </code><a class="headerlink" href="#ghc-flag---help" title="Permalink to this definition">¶</a></dt>
<dt id="ghc-flag--?">
<code class="descname">-?</code><code class="descclassname"> </code><a class="headerlink" href="#ghc-flag--?" title="Permalink to this definition">¶</a></dt>
<dd><p>GHC は使い方に関する長いメッセージを標準出力に吐いて，終了します．</p>
</dd></dl>

<dl class="ghc-flag">
<dt id="ghc-flag---show-iface">
<code class="descname">--show-iface</code><code class="descclassname"> ⟨file⟩</code><a class="headerlink" href="#ghc-flag---show-iface" title="Permalink to this definition">¶</a></dt>
<dd><p>⟨file⟩ 中のインターフェイスを読んで，それをテキストとして <code class="docutils literal"><span class="pre">stdout</span></code> にダンプします．
たとえば <code class="docutils literal"><span class="pre">ghc</span> <span class="pre">--show-iface</span> <span class="pre">M.hi</span></code> のように使います．</p>
</dd></dl>

<dl class="ghc-flag">
<dt id="ghc-flag---supported-extensions">
<code class="descname">--supported-extensions</code><code class="descclassname"> </code><a class="headerlink" href="#ghc-flag---supported-extensions" title="Permalink to this definition">¶</a></dt>
<dt id="ghc-flag---supported-languages">
<code class="descname">--supported-languages</code><code class="descclassname"> </code><a class="headerlink" href="#ghc-flag---supported-languages" title="Permalink to this definition">¶</a></dt>
<dd><p>サポートしている言語拡張を表示します．</p>
</dd></dl>

<dl class="ghc-flag">
<dt id="ghc-flag---show-options">
<code class="descname">--show-options</code><code class="descclassname"> </code><a class="headerlink" href="#ghc-flag---show-options" title="Permalink to this definition">¶</a></dt>
<dd><p>サポートしているコマンドラインオプションを表示します．シェルでの自動補完のために使えます．</p>
</dd></dl>

<dl class="ghc-flag">
<dt id="ghc-flag---info">
<code class="descname">--info</code><code class="descclassname"> </code><a class="headerlink" href="#ghc-flag---info" title="Permalink to this definition">¶</a></dt>
<dd><p>コンパイラに関する情報を表示します．</p>
</dd></dl>

<dl class="ghc-flag">
<dt id="ghc-flag---version">
<code class="descname">--version</code><code class="descclassname"> </code><a class="headerlink" href="#ghc-flag---version" title="Permalink to this definition">¶</a></dt>
<dt id="ghc-flag--V">
<code class="descname">-V</code><code class="descclassname"> </code><a class="headerlink" href="#ghc-flag--V" title="Permalink to this definition">¶</a></dt>
<dd><p>GHCのバージョン番号を含む1行の文字列を表示します．</p>
</dd></dl>

<dl class="ghc-flag">
<dt id="ghc-flag---numeric-version">
<code class="descname">--numeric-version</code><code class="descclassname"> </code><a class="headerlink" href="#ghc-flag---numeric-version" title="Permalink to this definition">¶</a></dt>
<dd><p>GHCのバージョンを数値でのみ表示します．</p>
</dd></dl>

<dl class="ghc-flag">
<dt id="ghc-flag---print-libdir">
<code class="descname">--print-libdir</code><code class="descclassname"> </code><a class="headerlink" href="#ghc-flag---print-libdir" title="Permalink to this definition">¶</a></dt>
<dd><p id="index-14">GHCライブラリディレクトリのパスを表示します．
このパスはGHCのライブラリ，インターフェイス，インクルードファイルが置かれているディレクトリツリーの最上位です
(通常 Unix では <code class="docutils literal"><span class="pre">/usr/local/lib/ghc-8.0.2</span></code> のような場所です)．
これはパッケージの設定ファイル(<a class="reference internal" href="packages.html#packages"><span>Packages</span></a> 参照)における <code class="docutils literal"><span class="pre">$libdir</span></code> の値です．</p>
</dd></dl>

<div class="section" id="ghc-make">
<span id="make-mode"></span><h3>7.1.5.1. <code class="docutils literal"><span class="pre">ghc</span></code> <code class="docutils literal"><span class="pre">--make</span></code> を使う<a class="headerlink" href="#ghc-make" title="Permalink to this headline">¶</a></h3>
<p id="index-15">このモードではGHCは複数のモジュールからなるHaskellプログラムをビルドします．
このとき，GHCは1つ以上のルートモジュール(通常は <code class="docutils literal"><span class="pre">Main</span></code> のみ)から依存性を追跡します．
たとえば <code class="docutils literal"><span class="pre">Main</span></code> モジュールが <code class="file docutils literal"><span class="pre">Main.hs</span></code> というファイルに置かれているとき，
次のようにすればこのプログラムをコンパイルリンクできます．</p>
<div class="highlight-none"><div class="highlight"><pre>ghc --make Main.hs
</pre></div>
</div>
<p>実際には，コマンドライン中に1つでもHaskellソースファイルがあり，他のモードが指定されていなければ，GHCは自動的にmakeモードになります．
したがって，これ例では以下のようにタイプするだけでよいのです．</p>
<div class="highlight-none"><div class="highlight"><pre>ghc Main.hs
</pre></div>
</div>
<p>ソースファイル名やモジュール名はいくつでも指定できます．
GHCは，指定されたこれらの初期ファイルからインポートを追いかけて，プログラムに含まれるすべてのモジュールを見つけだします．
次に，最新ではないモジュールの再コンパイルを試み，最後に <code class="docutils literal"><span class="pre">Main</span></code> モジュールがあれば，プログラムをリンクして実行可能形式にします．</p>
<p>伝統的な <code class="docutils literal"><span class="pre">Makefile</span></code> に対して <code class="docutils literal"><span class="pre">ghc</span> <span class="pre">--make</span></code> を使う利点は，以下のようなことです．</p>
<ul>
<li><p class="first">コンパイルごとにGHCを再起動する必要がないので，それぞれのコンパイル間で情報をキャッシュできます．
複数のモジュールからなるプログラムを <code class="docutils literal"><span class="pre">ghc</span> <span class="pre">--make</span></code> でコンパイルする方が，
個々のソースファイルを1つずつコンパイルするより2倍も速くなることがあります．</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">Makefile</span></code> を書かなくて済みます．</p>
</li>
<li id="index-16"><p class="first">GHCは起動されるごとに依存関係を再計算するので，
ソースとの整合性が失われることはありません．</p>
</li>
<li><p class="first"><a class="reference internal" href="#ghc-flag--j"><code class="xref std std-ghc-flag docutils literal"><span class="pre">-j</span></code></a> フラグを使えば，モジュールを並列にコンパイルできます．
<code class="docutils literal"><span class="pre">-j⟨N⟩</span></code> と指定すれば ⟨N⟩ 個のジョブが並列に走ります．N を省略した場合は，デフォルトではプロセッサの数になります．</p>
</li>
</ul>
<p>この章でこれ以降に解説するコマンドラインオプションはどれも <code class="docutils literal"><span class="pre">--make</span></code> オプションと共用できます．
ただし，コマンドラインから与えれらたオプションはコンパイルするすべてのソースファイルに適用されるので，
個別のファイルにだけ適用したいオプションについては <code class="docutils literal"><span class="pre">OPTIONS_GHC</span></code> プラグマを使う必要があります(<a class="reference internal" href="#source-file-options"><span>ソースファイル中のコマンドラインオプション</span></a> 参照)．</p>
<p>プログラムを追加のオブジェクト(たとえば，補助的なCのコード)とリンクする必要があるなら，
そのオブジェクトファイルをコマンド行で与えれば，GHCは実行可能ファイルをリンクするときに指定されたオブジェクトを含めます．</p>
<p>既存の make スクリプトとの後方互換性確保のため <a class="reference internal" href="#ghc-flag--c"><code class="xref std std-ghc-flag docutils literal"><span class="pre">-c</span></code></a> と組み合わせて使うと，リンクのフェーズは省略します
(<code class="docutils literal"><span class="pre">--make</span> <span class="pre">-no-link</span></code> を指定したのと同じ)．</p>
<p>GHC はソースファイルがあるときにしか依存性を追跡できないので，
ソースファイルのないモジュールがプログラムに含まれていると，
たとえそのモジュールのオブジェクトファイルとインターフェイスファイルがあっても，
GHCは文句をいうことに注意してください．
ただし，パッケージモジュールの場合は例外で，このときはソースファイルはあってもなくてもかまいません．</p>
<p>プログラムのソースファイルはすべて同一のディレクトリにある必要はありません．
<a class="reference internal" href="separate_compilation.html#ghc-flag--i"><code class="xref std std-ghc-flag docutils literal"><span class="pre">-i</span></code></a> オプションを使って探索パスを追加できます(<a class="reference internal" href="separate_compilation.html#search-path"><span>The search path</span></a> 参照)．</p>
<dl class="ghc-flag">
<dt id="ghc-flag--j">
<code class="descname">-j</code><code class="descclassname"> [N]</code><a class="headerlink" href="#ghc-flag--j" title="Permalink to this definition">¶</a></dt>
<dd><p>可能であればコンパイルを並列で行います．GHC はコンパイル中に ⟨N⟩ 個までのスレッドを使います．
N の指定が省略されたばあいは，デフォルト値はプロセッサ数です．
モジュールのコンパイルは，それが依存しているモジュールのコンパイルが済んでから開始するということに注意してください．</p>
</dd></dl>

</div>
<div class="section" id="eval-mode">
<span id="id8"></span><h3>7.1.5.2. 式評価モード<a class="headerlink" href="#eval-mode" title="Permalink to this headline">¶</a></h3>
<p>このモードは対話モードとほぼ同じですが，評価する式は1つだけで，コマンドラインから <code class="docutils literal"><span class="pre">-e</span></code> オプションの引数として指定します．</p>
<div class="highlight-none"><div class="highlight"><pre>ghc -e expr
</pre></div>
</div>
<p>コマンドラインで Haskell のソースファイルを指定することもできます．
指定したファイルは対話モードと全く同じようにロードします．
指定した式はロードしたモジュールの文脈で評価します．</p>
<p>たとえば <code class="docutils literal"><span class="pre">Main</span></code> というモジュールを含む Haskell プログラムをロードして走らせるには，次のようにすればよいでしょう．</p>
<div class="highlight-none"><div class="highlight"><pre>ghc -e Main.main Main.hs
</pre></div>
</div>
<p>また，このモードを使えば，単に式を <code class="docutils literal"><span class="pre">Prelude</span></code> の文脈で評価できます．</p>
<div class="highlight-none"><div class="highlight"><pre>$ ghc -e &quot;interact (unlines.map reverse.lines)&quot;
hello
olleh
</pre></div>
</div>
</div>
<div class="section" id="options-order">
<span id="id9"></span><h3>7.1.5.3. 一括コンパイラモード<a class="headerlink" href="#options-order" title="Permalink to this headline">¶</a></h3>
<p><em>一括処理モード</em> で GHC はコマンドラインで指定した1つ以上のソースファイルをコンパイルします．</p>
<p>複数ある段階のどこから始めるかは，それぞれのファイルの接尾辞によって決まります．
どこで終るかはフラグで指定します．
特にフラグによる指定がなければ，リンクまでの全ての段階を実行します．
以下の表にまとめておきます．</p>
<table border="1" class="docutils">
<colgroup>
<col width="29%" />
<col width="25%" />
<col width="23%" />
<col width="23%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">コンパイルシステムの段階</th>
<th class="head">「ここから開始」の接尾辞</th>
<th class="head">「ここで終了」のフラグ</th>
<th class="head">出力ファイルの接尾辞</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>文芸形式プリプロセッサ</td>
<td><code class="docutils literal"><span class="pre">.lhs</span></code></td>
<td>&nbsp;</td>
<td><code class="docutils literal"><span class="pre">.hs</span></code></td>
</tr>
<tr class="row-odd"><td>C プリプロセッサ(省略可)</td>
<td><code class="docutils literal"><span class="pre">.hs</span></code> (<code class="docutils literal"><span class="pre">-cpp</span></code> を使う)</td>
<td><code class="docutils literal"><span class="pre">-E</span></code></td>
<td><code class="docutils literal"><span class="pre">.hspp</span></code></td>
</tr>
<tr class="row-even"><td>Haskell コンパイラ</td>
<td><code class="docutils literal"><span class="pre">.hs</span></code></td>
<td><code class="docutils literal"><span class="pre">-C</span></code>, <code class="docutils literal"><span class="pre">-S</span></code></td>
<td><code class="docutils literal"><span class="pre">.hc</span></code>, <code class="docutils literal"><span class="pre">.s</span></code></td>
</tr>
<tr class="row-odd"><td>C コンパイラ(省略可)</td>
<td><code class="docutils literal"><span class="pre">.hc</span></code> or <code class="docutils literal"><span class="pre">.c</span></code></td>
<td><code class="docutils literal"><span class="pre">-S</span></code></td>
<td><code class="docutils literal"><span class="pre">.s</span></code></td>
</tr>
<tr class="row-even"><td>アセンブラ</td>
<td><code class="docutils literal"><span class="pre">.s</span></code></td>
<td><code class="docutils literal"><span class="pre">-c</span></code></td>
<td><code class="docutils literal"><span class="pre">.o</span></code></td>
</tr>
<tr class="row-odd"><td>リンカ</td>
<td>⟨other⟩</td>
<td>&nbsp;</td>
<td><code class="docutils literal"><span class="pre">a.out</span></code></td>
</tr>
</tbody>
</table>
<p id="index-17">そういうわけで，多くの場合，次のように起動します．</p>
<div class="highlight-none"><div class="highlight"><pre>ghc -c Foo.hs
</pre></div>
</div>
<p>これで，Haskellのソースファイルが <code class="docutils literal"><span class="pre">Foo.hs</span></code> をコンパイルすると，オブジェクトファイル <code class="docutils literal"><span class="pre">Foo.o</span></code> が生成されます．</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Haskellのコンパイラが実際に出力するのが何かはバックエンドのコード生成器が何であるかによります．
詳細については <a class="reference internal" href="codegens.html#code-generators"><span>GHC Backends</span></a> を参照してください．</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">C のプリプロセッサは省略可能で <a class="reference internal" href="phases.html#ghc-flag--cpp"><code class="xref std std-ghc-flag docutils literal"><span class="pre">-cpp</span></code></a> フラグを指定すれば有効になります．
詳細については <a class="reference internal" href="phases.html#c-pre-processor"><span>Options affecting the C pre-processor</span></a> を参照してください．</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><a class="reference internal" href="#ghc-flag--E"><code class="xref std std-ghc-flag docutils literal"><span class="pre">-E</span></code></a> オプションを指定するとコンパイラのプリプロセス段階だけが実行され結果がファイルに出力されます．</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><a class="reference internal" href="#ghc-flag--C"><code class="xref std std-ghc-flag docutils literal"><span class="pre">-C</span></code></a> オプションはGHCが未登録モードでビルドされているときにだけ利用可能です．
詳細については <a class="reference internal" href="codegens.html#unreg"><span>Unregisterised compilation</span></a> を参照してください．</p>
</div>
<div class="section" id="overriding-suffixes">
<span id="id10"></span><h4>7.1.5.3.1. ファイルに対するデフォルトの振る舞いを上書きする<a class="headerlink" href="#overriding-suffixes" title="Permalink to this headline">¶</a></h4>
<p>上述のように，GHCがファイルを処理する方法はファイルの接頭辞で決まります．
この振る舞いは <a class="reference internal" href="#ghc-flag--x"><code class="xref std std-ghc-flag docutils literal"><span class="pre">-x</span></code></a> オプションで変更できます．</p>
<dl class="ghc-flag">
<dt id="ghc-flag--x">
<code class="descname">-x</code><code class="descclassname"> ⟨suffix⟩</code><a class="headerlink" href="#ghc-flag--x" title="Permalink to this definition">¶</a></dt>
<dd><p>コマンドラインにおいて，このオプションに続くすべてのファイルに指定した接尾辞 ⟨suffix⟩ が付いているものとして扱います．
たとえば <code class="docutils literal"><span class="pre">M.my-hs</span></code> というファイルにある Haskell モジュールをコンパイルするには <code class="docutils literal"><span class="pre">ghc</span> <span class="pre">-c</span> <span class="pre">-x</span> <span class="pre">hs</span> <span class="pre">M.my-hs</span></code> とします．</p>
</dd></dl>

</div>
</div>
</div>
<div class="section" id="options-help">
<span id="id11"></span><h2>7.1.6. 饒舌性に関するオプション<a class="headerlink" href="#options-help" title="Permalink to this headline">¶</a></h2>
<p id="index-18"><a class="reference internal" href="#modes"><span>実行モード</span></a> にある <code class="docutils literal"><span class="pre">--help</span></code> ， <code class="docutils literal"><span class="pre">--version</span></code> ， <code class="docutils literal"><span class="pre">--numeric-version</span></code> ， <code class="docutils literal"><span class="pre">--print-libdir</span></code> の各モードについても参照してください．</p>
<dl class="ghc-flag">
<dt id="ghc-flag--v">
<code class="descname">-v</code><code class="descclassname"> </code><a class="headerlink" href="#ghc-flag--v" title="Permalink to this definition">¶</a></dt>
<dd><p><a class="reference internal" href="#ghc-flag--v"><code class="xref std std-ghc-flag docutils literal"><span class="pre">-v</span></code></a> オプションにより GHC は <em>饒舌</em> になります．
GHCはバージョン番号を報告し，コンパイルシステムの各段階ごとに，どのように起動したかを(標準エラー出力に)表示します．
さらに，ほととんどの段階に <code class="docutils literal"><span class="pre">-v</span></code> フラグを渡し，それぞれがバージョン番号(やそれ以外の情報)を報告します．</p>
<p>バグ報告するときは，お願いですから <code class="docutils literal"><span class="pre">-v</span></code> を使ってください．
正しいことが正しい順序でおこなわれていることを先ず確認したいからです．</p>
</dd></dl>

<dl class="ghc-flag">
<dt>
<code class="descname">-v</code><code class="descclassname"> ⟨n⟩</code></dt>
<dd><p>より細かく饒舌性を制御するために <code class="docutils literal"><span class="pre">-v</span></code> は省略可能は数値引数を与えられるようになっています．
<code class="docutils literal"><span class="pre">-v</span></code> を単独で指定するのは <code class="docutils literal"><span class="pre">-v3</span></code> を指定するのと同じです．その他のレベルには以下のものがあります．</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">-v0</span></code></dt>
<dd>本質的ではない全てのメッセージを無効にします(これがデフォルト)．</dd>
<dt><code class="docutils literal"><span class="pre">-v1</span></code></dt>
<dd>最小限の饒舌性．コンパイルごとに1行表示します(<a class="reference internal" href="#ghc-flag---make"><code class="xref std std-ghc-flag docutils literal"><span class="pre">--make</span></code></a> あるいは <a class="reference internal" href="#ghc-flag---interactive"><code class="xref std std-ghc-flag docutils literal"><span class="pre">--interactive</span></code></a> が指定されたときはこれがデフォルト)．</dd>
<dt><code class="docutils literal"><span class="pre">-v2</span></code></dt>
<dd>各コンパイル段階を実行するときに，その段階の名前が表示されます(<a class="reference internal" href="debugging.html#ghc-flag--dshow-passes"><code class="xref std std-ghc-flag docutils literal"><span class="pre">-dshow-passes</span></code></a> を指定したのと同じ)．</dd>
<dt><code class="docutils literal"><span class="pre">-v3</span></code></dt>
<dd>各コンパイル段階について完全なコマンドライン(あれば)を表示します．それ以外は <code class="docutils literal"><span class="pre">-v2</span></code> と同じです．</dd>
<dt><code class="docutils literal"><span class="pre">-v4</span></code></dt>
<dd>各コンパイル段階が終った後に (プリプロセッサの結果およびC/アセンブリファイルを除く) その段階での中間形式でプログラムを表示します．</dd>
</dl>
</dd></dl>

<dl class="ghc-flag">
<dt id="ghc-flag--fprint-potential-instances">
<code class="descname">-fprint-potential-instances</code><code class="descclassname"> </code><a class="headerlink" href="#ghc-flag--fprint-potential-instances" title="Permalink to this definition">¶</a></dt>
<dd><p>GHC はクラスのインスタンスを見つけられなかったら，判っているインスタンスのうちいくつかを並べて表示します．
このフラグが指定されているときには，判っているインスタンスを <em>すべて</em> 表示します．</p>
</dd></dl>

<p>以下のフラグはGHCのエラーメッセージとGHCiとにおける型情報の表示方法を制御するものです．</p>
<dl class="ghc-flag">
<dt id="ghc-flag--fprint-unicode-syntax">
<code class="descname">-fprint-unicode-syntax</code><code class="descclassname"> </code><a class="headerlink" href="#ghc-flag--fprint-unicode-syntax" title="Permalink to this definition">¶</a></dt>
<dd><p>このフラグが有効になっていれば，GHC は型シグネチャを言語拡張 <a class="reference internal" href="glasgow_exts.html#ghc-flag--XUnicodeSyntax"><code class="xref std std-ghc-flag docutils literal"><span class="pre">-XUnicodeSyntax</span></code></a> 由来のユニコード記号を使って表示します．
たとえば，以下のような表示になります．</p>
<div class="highlight-none"><div class="highlight"><pre>ghci&gt; :set -fprint-unicode-syntax
ghci&gt; :t (&gt;&gt;)
(&gt;&gt;) :: ∀ (m :: * → *) a b. Monad m ⇒ m a → m b → m b
</pre></div>
</div>
</dd></dl>

<span class="target" id="pretty-printing-types"></span><dl class="ghc-flag">
<dt id="ghc-flag--fprint-explicit-foralls">
<code class="descname">-fprint-explicit-foralls</code><code class="descclassname"> </code><a class="headerlink" href="#ghc-flag--fprint-explicit-foralls" title="Permalink to this definition">¶</a></dt>
<dd><p><a class="reference internal" href="#ghc-flag--fprint-explicit-foralls"><code class="xref std std-ghc-flag docutils literal"><span class="pre">-fprint-explicit-foralls</span></code></a> を指定すると
GHC は型のトップレベルに，通常は表示されない <code class="docutils literal"><span class="pre">forall</span></code> 量化子を表示します．
GHCi では，たとえば，以下のようになります．</p>
<div class="highlight-none"><div class="highlight"><pre>ghci&gt; let f x = x
ghci&gt; :t f
f :: a -&gt; a
ghci&gt; :set -fprint-explicit-foralls
ghci&gt; :t f
f :: forall a. a -&gt; a
</pre></div>
</div>
<p>ただし，このフラグの設定いかんにかかわらず，以下の場合には量化子が表示されます．</p>
<ul>
<li><p class="first">入れ子になった <code class="docutils literal"><span class="pre">forall</span></code></p>
<div class="highlight-none"><div class="highlight"><pre>ghci&gt; :t GHC.ST.runST
GHC.ST.runST :: (forall s. GHC.ST.ST s a) -&gt; a
</pre></div>
</div>
</li>
<li><p class="first">量化子付きの型変数のどれかがカインド変数で言及されているカインドをもつ</p>
<div class="highlight-none"><div class="highlight"><pre>ghci&gt; :i Data.Type.Equality.sym
Data.Type.Equality.sym ::
  forall (k :: BOX) (a :: k) (b :: k).
  (a Data.Type.Equality.:~: b) -&gt; b Data.Type.Equality.:~: a
        -- Defined in Data.Type.Equality
</pre></div>
</div>
</li>
</ul>
</dd></dl>

<dl class="ghc-flag">
<dt id="ghc-flag--fprint-explicit-kinds">
<code class="descname">-fprint-explicit-kinds</code><code class="descclassname"> </code><a class="headerlink" href="#ghc-flag--fprint-explicit-kinds" title="Permalink to this definition">¶</a></dt>
<dd><p><a class="reference internal" href="#ghc-flag--fprint-explicit-kinds"><code class="xref std std-ghc-flag docutils literal"><span class="pre">-fprint-explicit-kinds</span></code></a> を指定すると，通常は表示されないカインドが型に表示されます．
カインド多相を使っているときには重要な機能です．</p>
<div class="highlight-none"><div class="highlight"><pre>ghci&gt; :set -XPolyKinds
ghci&gt; data T a = MkT
ghci&gt; :t MkT
MkT :: forall (k :: BOX) (a :: k). T a
ghci&gt; :set -fprint-explicit-foralls
ghci&gt; :t MkT
MkT :: forall (k :: BOX) (a :: k). T k a
</pre></div>
</div>
</dd></dl>

<dl class="ghc-flag">
<dt id="ghc-flag--fprint-explicit-runtime-reps">
<code class="descname">-fprint-explicit-runtime-reps</code><code class="descclassname"> </code><a class="headerlink" href="#ghc-flag--fprint-explicit-runtime-reps" title="Permalink to this definition">¶</a></dt>
<dd><p><a class="reference internal" href="#ghc-flag--fprint-explicit-runtime-reps"><code class="xref std std-ghc-flag docutils literal"><span class="pre">-fprint-explicit-runtime-reps</span></code></a> が有効になっていると，
GHC は実行時表現多相型について <code class="docutils literal"><span class="pre">RuntimeRep</span></code> 型変数を表示します．
このフラグが有効になっていなければデフォルトでは <code class="docutils literal"><span class="pre">PtrRepLifted</span></code> になります．
以下はその表示例です．</p>
<div class="highlight-none"><div class="highlight"><pre>ghci&gt; :t ($)
($) :: (a -&gt; b) -&gt; a -&gt; b
ghci&gt; :set -fprint-explicit-runtime-reps
ghci&gt; :t ($)
($)
  :: forall (r :: GHC.Types.RuntimeRep) a (b :: TYPE r).
     (a -&gt; b) -&gt; a -&gt; b
</pre></div>
</div>
</dd></dl>

<dl class="ghc-flag">
<dt id="ghc-flag--fprint-explicit-coercions">
<code class="descname">-fprint-explicit-coercions</code><code class="descclassname"> </code><a class="headerlink" href="#ghc-flag--fprint-explicit-coercions" title="Permalink to this definition">¶</a></dt>
<dd><p><a class="reference internal" href="#ghc-flag--fprint-explicit-coercions"><code class="xref std std-ghc-flag docutils literal"><span class="pre">-fprint-explicit-coercions</span></code></a> を指定すると GHC は型の変換を表示します．
異なるカインドの型間の相等性を証明しようとすると，GHC は型レベルの変換を使います．
ユーザがこれ見なければならなくなるのは稀です．あくまでもコンパイラ内部のできごとだからです．</p>
</dd></dl>

<dl class="ghc-flag">
<dt id="ghc-flag--fprint-equality-relations">
<code class="descname">-fprint-equality-relations</code><code class="descclassname"> </code><a class="headerlink" href="#ghc-flag--fprint-equality-relations" title="Permalink to this definition">¶</a></dt>
<dd><p><a class="reference internal" href="#ghc-flag--fprint-equality-relations"><code class="xref std std-ghc-flag docutils literal"><span class="pre">-fprint-equality-relations</span></code></a> を使って GHC に表示の際に相等性の関係を識別するよう指示できます．
たとえば <code class="docutils literal"><span class="pre">~</span></code> 均質な持ち上げ(2つの引数は同じカインドをもつ)相等性関係であり，
<code class="docutils literal"><span class="pre">~~</span></code> は異質な持ち上げ(2つの引数の型が異なる)相等性関係であり，
<code class="docutils literal"><span class="pre">~#</span></code> は異質な持ち上げていないGHC内部のソルバで使われる相等性関係です．
一般にユーザはこの微妙な部分について気を配る必要があるべきではなく， <code class="docutils literal"><span class="pre">~</span></code> が
ユーザが欲っしているものでしょう．
<a class="reference internal" href="#ghc-flag--fprint-equality-relations"><code class="xref std std-ghc-flag docutils literal"><span class="pre">-fprint-equality-relations</span></code></a> が指定されていなければ，GHCはすべて <code class="docutils literal"><span class="pre">~</span></code> として表示します．
<a class="reference internal" href="glasgow_exts.html#equality-constraints"><span>Equality constraints</span></a> も参照してください．</p>
</dd></dl>

<dl class="ghc-flag">
<dt id="ghc-flag--fprint-expanded-synonyms">
<code class="descname">-fprint-expanded-synonyms</code><code class="descclassname"> </code><a class="headerlink" href="#ghc-flag--fprint-expanded-synonyms" title="Permalink to this definition">¶</a></dt>
<dd><p>これが有効になっていれば，GHC は型エラーメッセージで型シノニムを展開した型も表示します．
たとえば，以下のような型シノニムがあったとしましょう．</p>
<div class="highlight-haskell"><div class="highlight"><pre><span class="kr">type</span> <span class="kt">Foo</span> <span class="ow">=</span> <span class="kt">Int</span>
<span class="kr">type</span> <span class="kt">Bar</span> <span class="ow">=</span> <span class="kt">Bool</span>
<span class="kr">type</span> <span class="kt">MyBarST</span> <span class="n">s</span> <span class="ow">=</span> <span class="kt">ST</span> <span class="n">s</span> <span class="kt">Bar</span>
</pre></div>
</div>
<p>以下のような型エラーメッセージ</p>
<div class="highlight-none"><div class="highlight"><pre>Couldn&#39;t match type &#39;Int&#39; with &#39;Bool&#39;
Expected type: ST s Foo
  Actual type: MyBarST s
</pre></div>
</div>
<p>が以下のような型エラーメッセージになります．</p>
<div class="highlight-none"><div class="highlight"><pre>Couldn&#39;t match type &#39;Int&#39; with &#39;Bool&#39;
Expected type: ST s Foo
  Actual type: MyBarST s
Type synonyms expanded:
Expected type: ST s Int
  Actual type: ST s Bool
</pre></div>
</div>
</dd></dl>

<dl class="ghc-flag">
<dt id="ghc-flag--fprint-typechecker-elaboration">
<code class="descname">-fprint-typechecker-elaboration</code><code class="descclassname"> </code><a class="headerlink" href="#ghc-flag--fprint-typechecker-elaboration" title="Permalink to this definition">¶</a></dt>
<dd><p>これが有効であれば GHC は警告メッセージで型検査器よりの追加の情報を表示します．
たとえば，</p>
<div class="highlight-haskell"><div class="highlight"><pre><span class="nf">main</span> <span class="ow">::</span> <span class="kt">IO</span> <span class="nb">()</span>
<span class="nf">main</span> <span class="ow">=</span> <span class="kr">do</span>
  <span class="n">return</span> <span class="o">$</span> <span class="kr">let</span> <span class="n">a</span> <span class="ow">=</span> <span class="s">&quot;hello&quot;</span> <span class="kr">in</span> <span class="n">a</span>
  <span class="n">return</span> <span class="nb">()</span>
</pre></div>
</div>
<p>であるとします．以下の警告メッセージは</p>
<div class="highlight-none"><div class="highlight"><pre>A do-notation statement discarded a result of type ‘[Char]’
Suppress this warning by saying
  ‘_ &lt;- ($) return let a = &quot;hello&quot; in a’
or by using the flag -fno-warn-unused-do-bind
</pre></div>
</div>
<p>は以下のように表示されるようになります．</p>
<div class="highlight-none"><div class="highlight"><pre>A do-notation statement discarded a result of type ‘[Char]’
Suppress this warning by saying
  ‘_ &lt;- ($)
          return
          let
            AbsBinds [] []
              {Exports: [a &lt;= a
                           &lt;&gt;]
               Exported types: a :: [Char]
                               [LclId, Str=DmdType]
               Binds: a = &quot;hello&quot;}
          in a’
or by using the flag -fno-warn-unused-do-bind
</pre></div>
</div>
</dd></dl>

<dl class="ghc-flag">
<dt id="ghc-flag--ferror-spans">
<code class="descname">-ferror-spans</code><code class="descclassname"> </code><a class="headerlink" href="#ghc-flag--ferror-spans" title="Permalink to this definition">¶</a></dt>
<dd><p>これを有効にすると，GHC はエラーメッセージに関連する構文上の実体のソースコード上の範囲を表示します．
通常 GHC は構文上の実体のソースコードの開始位置だけを表示します．</p>
<p>たとえば，</p>
<div class="highlight-none"><div class="highlight"><pre>test.hs:3:6: parse error on input `where&#39;
</pre></div>
</div>
<p>という表示だったものが，</p>
<div class="highlight-none"><div class="highlight"><pre>test296.hs:3:6-10: parse error on input `where&#39;
</pre></div>
</div>
<p>のような表示になります．また，範囲は複数行にまたがることもあるので，その場合は</p>
<div class="highlight-none"><div class="highlight"><pre>test.hs:(5,4)-(6,7):
    Conflicting definitions for `a&#39;
    Bound at: test.hs:5:4
              test.hs:6:7
    In the binding group for: a, b, a
</pre></div>
</div>
<p>のようになります．行番号は1から数えますが，カラム番号は0から数えることに注意してください．
このような数えかたになっているのは，既存のよくある慣習(たとえば Emacs)にしたがったからです．</p>
</dd></dl>

<dl class="ghc-flag">
<dt id="ghc-flag--H">
<code class="descname">-H</code><code class="descclassname"> ⟨size⟩</code><a class="headerlink" href="#ghc-flag--H" title="Permalink to this definition">¶</a></dt>
<dd><p>ヒープの最小サイズを ⟨size⟩ に設定します．このオプションは
<code class="docutils literal"><span class="pre">+RTS</span> <span class="pre">-Hsize</span></code> と同じです． <a class="reference internal" href="runtime_control.html#rts-options-gc"><span>RTS options to control the garbage collector</span></a> を参照してください．</p>
</dd></dl>

<dl class="ghc-flag">
<dt id="ghc-flag--Rghc-timing">
<code class="descname">-Rghc-timing</code><code class="descclassname"> </code><a class="headerlink" href="#ghc-flag--Rghc-timing" title="Permalink to this definition">¶</a></dt>
<dd><p>GHC の実行に要した時間について統計情報を1行にまとめて表示します．
このオプションは <code class="docutils literal"><span class="pre">+RTS</span> <span class="pre">-tstderr</span></code> と同じです．
<a class="reference internal" href="runtime_control.html#rts-options-gc"><span>RTS options to control the garbage collector</span></a> を参照してください．</p>
</dd></dl>

</div>
<div class="section" id="options-platform">
<span id="id12"></span><h2>7.1.7. プラットフォーム固有のオプション<a class="headerlink" href="#options-platform" title="Permalink to this headline">¶</a></h2>
<p id="index-19">特定のターゲットプラットフォームについてのみ意味のあるフラグがいくつかあります．</p>
<dl class="ghc-flag">
<dt id="ghc-flag--msse2">
<code class="descname">-msse2</code><code class="descclassname"> </code><a class="headerlink" href="#ghc-flag--msse2" title="Permalink to this definition">¶</a></dt>
<dd><p>(x86 のみ．GHC 7.0.1 で追加) <a class="reference internal" href="codegens.html#native-code-gen"><span>native code generator</span></a> を使う場合，
浮動小数点演算を実装するのに SSE2 のレジスタと命令セットを使います．
これを指定すれば大幅に浮動小数点演算が改善されますが，コンパイルして得たコードは SSE2
をサポートしているプロセッサ(Intel の Pentium 4 以降と AMD Athlon 64 以降)上でないと動きません．
プロセッサが SSE2 をサポートしていれば <a class="reference internal" href="codegens.html#llvm-code-gen"><span>LLVM backend</span></a> は SSE2 を使いますが，
こちらは自動で認識しますので，フラグでの指定は不要です．</p>
<p>x86-64 のプラットフォームでは SSE2 は無条件で使われます．</p>
</dd></dl>

<dl class="ghc-flag">
<dt>
<code class="descname">-msse4.2</code><code class="descclassname"> </code></dt>
<dd><p>(x86 のみ．GHC 7.4.1 で追加)． <a class="reference internal" href="codegens.html#native-code-gen"><span>native code generator</span></a> を使う場合，
いくつかの浮動小数点演算とビット演算を実装するのに SSE4.2 命令セットを使います．
コンパイルして得たコードは SSE4.2 をサポートしているプロセッサ(Intel の Core i7 以降)上でないと動きません．
プロセッサが SSE4.2 をサポートしていれば <a class="reference internal" href="codegens.html#llvm-code-gen"><span>LLVM backend</span></a> は自動的にそれを認識しますので，
して使うようになりますので，フラグ指定は不要です．</p>
</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="using-warnings.html" title="7.2. 警告と整合性検査"
             >next</a> |</li>
        <li class="right" >
          <a href="usage.html" title="7. GHCを使う"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">GHC 8.0.2 Users Guide</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="usage.html" >7. GHCを使う</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2015, GHC Team.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.6.
    </div>
  </body>
</html>